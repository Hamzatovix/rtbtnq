# üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ –≤ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

## ‚úÖ –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:

```
üõçÔ∏è –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!

üì¶ –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: RB-20250108-ABC123
üë§ –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 999 123-45-67

üõí –¢–æ–≤–∞—Ä—ã:
  ‚Ä¢ Linen Tote Bag ‚Äî Linen (x1) ‚Äî 4 500 ‚ÇΩ
  ‚Ä¢ Minimal Backpack ‚Äî Black (x2) ‚Äî 13 000 ‚ÇΩ

üí∞ –ò—Ç–æ–≥–æ: 17 500 ‚ÇΩ

üöö –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏:
–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º (–≥. –ì—Ä–æ–∑–Ω—ã–π) ‚Äî 500 ‚ÇΩ

üìç –ê–¥—Ä–µ—Å:
–†–æ—Å—Å–∏—è, –ú–æ—Å–∫–≤–∞, —É–ª. –¢–µ—Å—Ç–æ–≤–∞—è, –¥. 1, –∫–≤. 10, 123456

üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏—Ç–µ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç–∞–≤–∫–æ–π
```

## üìä –î–µ—Ç–∞–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
1. **–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞** (`orderNumber`) - —Ñ–æ—Ä–º–∞—Ç: `RB-YYYYMMDD-XXXXXX`
2. **–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞** (`customerName`) - –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ù–µ —É–∫–∞–∑–∞–Ω–æ"
3. **–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞** (`customerPhone`) - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ ‚Äî "‚Äî"
5. **–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤** (`items`) - –∫–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä —Å:
   - –ù–∞–∑–≤–∞–Ω–∏–µ–º
   - –¶–≤–µ—Ç–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
   - –¶–µ–Ω–æ–π –∑–∞ –ø–æ–∑–∏—Ü–∏—é
6. **–ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞** (`total`) - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è —Å –≤–∞–ª—é—Ç–æ–π

### ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã):
7. **–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏** (`shippingMethod`) - —Å —Ü–µ–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞)
8. **–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏** (`address`) - –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å:
   - –°—Ç—Ä–∞–Ω–∞
   - –ì–æ—Ä–æ–¥
   - –£–ª–∏—Ü–∞ –∏ –¥–æ–º (line1)
   - –ö–≤–∞—Ä—Ç–∏—Ä–∞/–æ—Ñ–∏—Å (line2)
   - –ü–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å
9. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** (`note`) - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞ –∫ –∑–∞–∫–∞–∑—É

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
10. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ —Ñ–æ—Ç–æ/–º–µ–¥–∏–∞-–≥—Ä—É–ø–ø–∞ (–µ—Å–ª–∏ –Ω–µ localhost)
11. **–ö–Ω–æ–ø–∫–∞ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑"** - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–∫–∞–∑–∞ –≤ backoffice (–µ—Å–ª–∏ –Ω–µ localhost)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ checkpoint (–ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞)

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (`createOrder`)

**–§–∞–π–ª:** `front/src/server/orders/orders-json.service.ts`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞
2. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –∏ –Ω–æ–º–µ—Ä–∞ –∑–∞–∫–∞–∑–∞
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ JSON —Ñ–∞–π–ª
4. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
5. ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ)

**–õ–æ–≥–∏:**
```
[Order] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: { id: '...', number: 'RB-...', customerName: '...', total: ... }
[Order] –ù–∞—á–∞–ª–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram...
[Order] –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram: —É—Å–ø–µ—à–Ω–æ
```

### 2. API endpoint (`POST /api/orders`)

**–§–∞–π–ª:** `front/src/app/api/orders/route.ts`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (items –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã)
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ —á–µ—Ä–µ–∑ `createOrder`
3. ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
4. ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –û—à–∏–±–∫–∏ Telegram –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

### 3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (`formatOrderNotification`)

**–§–∞–π–ª:** `front/src/lib/telegram.ts`

**–ß—Ç–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è:**
- ‚úÖ –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞
- ‚úÖ –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ –¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ —Ü–µ–Ω–∞–º–∏
- ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
- ‚úÖ –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ —Å —Ü–µ–Ω–æ–π
- ‚úÖ –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–ª–∏–µ–Ω—Ç–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Å–æ–ª–∏:

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:

```
[Order] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω: { id: '...', number: 'RB-...', customerName: '...', total: ... }
[Order] –ù–∞—á–∞–ª–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram...
[Telegram] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: { hasToken: true, hasChatId: true, ... }
[Telegram] –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫–∞–∑–µ: { orderNumber: 'RB-...', orderUrl: '...', isValidUrl: true/false }
[Telegram] –°–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram
[Order] –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram: —É—Å–ø–µ—à–Ω–æ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Telegram:

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
- ‚úÖ –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
- ‚úÖ –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ü–µ–Ω–∞
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –ö–Ω–æ–ø–∫—É "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑" (–µ—Å–ª–∏ –Ω–µ localhost)
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (–µ—Å–ª–∏ –Ω–µ localhost)

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Localhost:**
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (Telegram –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø)
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑" –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Å—Å—ã–ª–∫–æ–π

2. **–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:**
   - Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–ª–∏–Ω—É –ø–æ–¥–ø–∏—Å–∏ –∫ —Ñ–æ—Ç–æ –¥–æ 1024 —Å–∏–º–≤–æ–ª–æ–≤
   - –î–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–µ–∑–∞—é—Ç—Å—è —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º "..."

3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω)
- [ ] –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤–∫–ª—é—á–µ–Ω—ã –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- [ ] –¶–µ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- [ ] –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- [ ] –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–ª–Ω—ã–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [ ] –°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —Ü–µ–Ω–∞ —É–∫–∞–∑–∞–Ω—ã
- [ ] –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤–∫–ª—é—á–µ–Ω (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram
- [ ] –ö–Ω–æ–ø–∫–∞ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–∫–∞–∑" —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –Ω–µ localhost)
- [ ] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–µ—Å–ª–∏ –Ω–µ localhost)

