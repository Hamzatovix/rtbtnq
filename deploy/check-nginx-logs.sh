#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–∞ Nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

echo "üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Nginx"
echo "================================"
echo ""

# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
echo "1Ô∏è‚É£  –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:"
docker ps -a | grep shtrafnett_nginx
echo ""

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
echo "2Ô∏è‚É£  –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å—Ç—Ä–æ–∫):"
docker logs shtrafnett_nginx --tail 30
echo ""

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–∞ —Ö–æ—Å—Ç–µ
echo "3Ô∏è‚É£  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–µ:"
ls -la /root/Shtraf/nginx/ssl/rosebotanique/
echo ""

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å volumes –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
echo "4Ô∏è‚É£  Volumes –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:"
docker inspect shtrafnett_nginx | grep -A 20 "Binds" | head -25
echo ""

# 5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
echo "5Ô∏è‚É£  –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:"
docker start shtrafnett_nginx
sleep 2
docker ps | grep shtrafnett_nginx || echo "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è"
echo ""

# 6. –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–Ω–æ–≤–∞
if ! docker ps | grep -q shtrafnett_nginx; then
    echo "6Ô∏è‚É£  –õ–æ–≥–∏ –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞:"
    docker logs shtrafnett_nginx --tail 20
fi

