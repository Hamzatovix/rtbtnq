# Проверка статуса DNS для rosebotanique.store

## Текущий статус

**Результат `nslookup`:**
```
╚ь :     rosebotanique.store
```

❌ **DNS ещё не распространился** — нет IP-адреса в ответе.

---

## Что это значит?

1. **DNS-записи добавлены в REG.RU** ✅
2. **Но они ещё не распространились по всему миру** ⏳
3. **Нужно подождать 15-60 минут** (иногда до 24 часов)

---

## Как проверить DNS правильно?

### Вариант 1: Онлайн-проверка (самый надёжный)

1. Открой: https://dnschecker.org/
2. Введи домен: `rosebotanique.store`
3. Выбери тип записи: `A`
4. Нажми "Search"

**Ожидаемый результат:**
- Во всех регионах должно быть: `176.57.213.174` ✅
- Если в некоторых регионах пусто или другой IP — DNS ещё распространяется ⏳

### Вариант 2: Проверка через разные DNS-серверы

**В PowerShell:**
```powershell
# Проверка через Google DNS
nslookup rosebotanique.store 8.8.8.8

# Проверка через Cloudflare DNS
nslookup rosebotanique.store 1.1.1.1

# Проверка через Яндекс DNS
nslookup rosebotanique.store 77.88.8.8
```

### Вариант 3: Проверка на сервере

```bash
# На сервере (через SSH)
ssh root@176.57.213.174

# Проверка через dig
dig rosebotanique.store +short

# Проверка через host
host rosebotanique.store

# Проверка через nslookup
nslookup rosebotanique.store
```

---

## Что делать пока DNS распространяется?

### ✅ Можно делать СЕЙЧАС (не зависит от DNS):

#### 1. Обновить переменные окружения

```bash
# На сервере
ssh root@176.57.213.174
cd /opt/rosebotanique
nano front/.env.production
```

Убедись, что указано:
```env
NEXT_PUBLIC_BASE_URL=https://rosebotanique.store
```

Сохрани (`Ctrl+O`, `Enter`, `Ctrl+X`) и перезапусти:
```bash
docker restart rosebotanique
```

#### 2. Проверить работу сайта по IP

```bash
# На сервере
curl -I http://176.57.213.174:3000
curl -I -H "Host: rosebotanique.store" https://176.57.213.174 -k
```

Должен возвращать `200 OK`.

---

### ⏳ Нужно ждать распространения DNS:

#### 3. Получить SSL-сертификат

**Важно:** Certbot требует, чтобы DNS уже работал!

```bash
# После того, как DNS распространится
apt update
apt install -y certbot python3-certbot-nginx

certbot certonly --nginx \
  -d rosebotanique.store \
  -d www.rosebotanique.store
```

---

## Как понять, что DNS распространился?

### ✅ Признаки успешного распространения:

1. **nslookup показывает IP:**
   ```
   Address: 176.57.213.174
   ```

2. **Онлайн-проверка показывает IP везде:**
   - https://dnschecker.org/ — все серверы показывают `176.57.213.174`

3. **Сайт открывается по домену:**
   - `http://rosebotanique.store` → редирект на HTTPS
   - `https://rosebotanique.store` → открывается сайт

---

## Типичное время распространения DNS

| Регион | Время |
|--------|-------|
| Локальный DNS-сервер | 5-15 минут |
| Региональные серверы | 30-60 минут |
| Глобальное распространение | 1-4 часа |
| Полное распространение | до 24-48 часов |

---

## Что делать, если DNS не распространился через 2 часа?

### Проверка 1: Правильность DNS-записей в REG.RU

1. Зайди в панель REG.RU
2. Проверь DNS-записи:
   - Тип: `A`
   - Поддомен: `@` (или пусто)
   - IP: `176.57.213.174`
   - Тип: `A`
   - Поддомен: `www`
   - IP: `176.57.213.174`

### Проверка 2: Используются ли DNS-серверы REG.RU

В панели REG.RU проверь:
- **DNS-серверы** должны быть от REG.RU (например, `ns1.reg.ru`, `ns2.reg.ru`)
- Если указаны другие DNS-серверы — изменения не применятся!

### Проверка 3: Очистка кэша DNS на компьютере

```powershell
# В PowerShell от администратора
ipconfig /flushdns
```

---

## Следующие шаги после распространения DNS

1. ✅ Проверь DNS через https://dnschecker.org/
2. ✅ Получи SSL-сертификат через Certbot
3. ✅ Настрой Nginx для использования сертификата
4. ✅ Проверь работу сайта по домену

---

**Подожди 30-60 минут и проверь снова!** ⏰

