# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –°—Ç–∞—Ç—É—Å: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `unoptimized` —Ñ–ª–∞–≥ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ `/uploads/` –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω CSP –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Vercel Blob

**–§–∞–π–ª—ã:**
- `front/src/app/api/upload/image/route.ts` - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `front/src/components/ui/optimized-image.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω unoptimized
- `front/src/app/product/[id]/page.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω unoptimized
- `front/src/app/gallery/page.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω unoptimized
- `front/src/app/brand/page.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω unoptimized
- `front/src/app/backoffice/gallery/page.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω unoptimized

**–ü—É—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
- –¢–æ–≤–∞—Ä—ã: `/app/public/uploads/products/`
- –ì–∞–ª–µ—Ä–µ—è: `/app/public/uploads/gallery/`

**URL –¥–æ—Å—Ç—É–ø–∞:**
- `/uploads/products/—Ñ–∞–π–ª.jpg`
- `/uploads/gallery/—Ñ–∞–π–ª.jpg`

---

## ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**API:** `POST /api/categories`

**–§–∞–π–ª—ã:**
- `front/src/app/api/categories/route.ts` (POST handler)
- `front/src/app/backoffice/categories/page.tsx` (UI —Ñ–æ—Ä–º–∞)
- `front/src/server/categories/categories-json.service.ts` (—Å–µ—Ä–≤–∏—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç JSON —Å –ø–æ–ª—è–º–∏: `slug`, `name`, `position`, `is_active`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (slug, name)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ slug
- ‚úÖ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID (timestamp)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `src/data/categories.json`
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (TTL: 5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

**–ü–æ–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- `id` (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
- `slug` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `name` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `position` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
- `is_active` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)

**–§–æ—Ä–º–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:**
```json
[
  {
    "id": "1234567890",
    "slug": "category-slug",
    "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
    "position": 0,
    "is_active": true
  }
]
```

---

## üñºÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≥–∞–ª–µ—Ä–µ—é

### –°—Ç–∞—Ç—É—Å: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `POST /api/upload/image` —Å `folder='gallery'`
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `/app/public/uploads/gallery/`
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥–∞–ª–µ—Ä–µ—é —á–µ—Ä–µ–∑ `POST /api/gallery` —Å `src` –∏ `alt`

**API:**
- `POST /api/upload/image` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (folder='gallery')
- `POST /api/gallery` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥–∞–ª–µ—Ä–µ—é
- `GET /api/gallery` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `PUT /api/gallery` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏
- `DELETE /api/gallery?id=...` - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `front/src/app/api/gallery/route.ts` (–≤—Å–µ –º–µ—Ç–æ–¥—ã)
- `front/src/app/backoffice/gallery/page.tsx` (UI)
- `front/src/server/gallery/gallery-json.service.ts` (—Å–µ—Ä–≤–∏—Å)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –≤ `/uploads/gallery/`
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID (nanoid)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `src/data/gallery.json`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Supabase (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–±–µ–∑ Supabase)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏

**–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:**
```json
{
  "images": [
    {
      "id": "abc123",
      "src": "/uploads/gallery/1234567890-xyz.jpg",
      "alt": "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
    }
  ]
}
```

---

## ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–¥–∞–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Vercel Blob
- ‚úÖ –ö–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/public/uploads/`
- ‚úÖ `BLOB_READ_WRITE_TOKEN` –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### 2. –î–æ–±–∞–≤–ª–µ–Ω `unoptimized` —Ñ–ª–∞–≥
- ‚úÖ `OptimizedImage` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞ (`/product/[id]`)
- ‚úÖ –ì–∞–ª–µ—Ä–µ—è (`/gallery`)
- ‚úÖ –ë—Ä–µ–Ω–¥ (`/brand`)
- ‚úÖ –ë—ç–∫-–æ—Ñ–∏—Å –≥–∞–ª–µ—Ä–µ—è (`/backoffice/gallery`)

### 3. –û–±–Ω–æ–≤–ª—ë–Ω CSP
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `localhost`, `rosebotanique.store`, `176.57.213.174`

### 4. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã volumes –≤ Docker
- ‚úÖ `/opt/rosebotanique/front/public/uploads:/app/public/uploads`
- ‚úÖ `/opt/rosebotanique/front/src/data:/app/src/data`
- ‚úÖ `/opt/rosebotanique/front/prisma_data:/app/prisma_data`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
1. –û—Ç–∫—Ä–æ–π `/backoffice/categories`
2. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É (slug, name, position)
3. –ù–∞–∂–º–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≥–∞–ª–µ—Ä–µ—é:
1. –û—Ç–∫—Ä–æ–π `/backoffice/gallery`
2. –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
3. –í—ã–±–µ—Ä–∏ —Ñ–∞–π–ª(—ã)
4. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –≥–∞–ª–µ—Ä–µ–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞:
1. –û—Ç–∫—Ä–æ–π `/backoffice/products/new`
2. –î–æ–±–∞–≤—å –≤–∞—Ä–∏–∞–Ω—Ç —Ç–æ–≤–∞—Ä–∞
3. –ù–∞–∂–º–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
4. –í—ã–±–µ—Ä–∏ —Ñ–∞–π–ª
5. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–µ–≤—å—é

---

## üìù –ò—Ç–æ–≥

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≥–∞–ª–µ—Ä–µ—é
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å unoptimized —Ñ–ª–∞–≥–æ–º)

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

